item = ("<%= @item.id %>");
cart=[];
if(localStorage.getItem('cart').length > 0){
  cart = localStorage.getItem('cart');
  cart=JSON.parse(cart);
}



buttons = document.getElementsByClassName("card__add");

for(let i=0; i< buttons.length; i++){

  sign = buttons[i].lastElementChild;


  el=buttons[i].firstElementChild.textContent.replace(/\s/g,'');

  if (el == item){
    if(cart.indexOf(item)<0){
      sign.remove();
      buttons[i].lastElementChild.remove();

      var added = document.createElement("div");
      added.textContent="AJOUTÃ‰ AU PANIER";
      added.className="card__add--added";

      buttons[i].appendChild(added);

      buttons[i].className = "card__add reverse";
      cart.push(item);
    }
  }
}

localStorage.clear();

localStorage.setItem('cart', JSON.stringify(cart));
