<div id="main--content">
  <div class="items--index">
    <% @items.each do |item|%>
        <%= render(partial: 'item_card--index',
                   locals: {card_title: item.title, price: item.price, photo_url: item.photo_url, item: item})%>
    <% end %>
  </div>
</div>
<script type="text/javascript">
  cart=[];
  if(localStorage.getItem('cart').length > 0){
    cart = localStorage.getItem('cart');
    cart=JSON.parse(cart);
  }



  buttons = document.getElementsByClassName("card__add");


  for(let i=0; i< buttons.length; i++){

    sign = buttons[i].lastElementChild;


    el=buttons[i].firstElementChild.textContent.replace(/\s/g,'');

    if(cart.indexOf(el)>=0){
      console.log(el)
      sign.remove();
      buttons[i].lastElementChild.remove();

      var added = document.createElement("div");
      added.textContent="AJOUTÃ‰ AU PANIER";
      added.className="card__add--added"

      buttons[i].appendChild(added);

      buttons[i].className = "card__add reverse";
      cart.push(item);
    }
  }
</script>
